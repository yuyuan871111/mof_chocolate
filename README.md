# project name: mof_chocolate
* 原生編輯於Evernote，如下<a href="https://www.evernote.com/shard/s317/client/snv?noteGuid=15869be0-074d-44d5-a69d-ea30dff8ad35&noteKey=58348029ad89b0b1&sn=https%3A%2F%2Fwww.evernote.com%2Fshard%2Fs317%2Fsh%2F15869be0-074d-44d5-a69d-ea30dff8ad35%2F58348029ad89b0b1&title=%253C99%253E%2B%25E5%25AF%25A6%25E7%25BF%2592%25E7%25B5%2590%25E6%259E%259C%25E5%25A0%25B1%25E5%2591%258A">網址</a>可以前往觀看。
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 7.14 (458265)"/><meta name="altitude" content="15.02381324768066"/><meta name="author" content="adp871111"/><meta name="created" content="2018-08-27 01:17:49 +0000"/><meta name="latitude" content="25.1195058595458"/><meta name="longitude" content="121.5128901747946"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2019-07-10 06:24:34 +0000"/>2018陽明大學生醫資訊所暑假實習結果報告</head><body><div><div><div style="text-align: center;"><span style="font-size: 21.3333px;"><span style="font-size: 21.3333px; font-weight: bold;">指導教授：楊永正</span></span></div><div style="text-align: center;"><span style="font-size: 12pt;">實習人員：謝文瑜、楊淯元、楊雅惠、周信呈</span></div><div style="text-align: center;"><span style="font-size: 12pt;"><br/></span></div><hr/><div><a href="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/%E9%99%BD%E6%98%8E%E5%A4%A7%E5%AD%B8%E5%AF%A6%E7%BF%92%E7%B5%90%E5%A0%B1.pptx">陽明大學實習結報.pptx</a></div><hr/><div><span style="font-size: 12pt; color: rgb(227, 0, 0); font-weight: bold;"># 實習大鋼</span></div><ul><li><div><span style="font-size: 12pt;">實習目標：實做出一個提供互動式的儀表板「</span><span style="font-size: 12pt;">微生物相」</span><span style="font-size: 12pt;">研究人員，實用的微生物「資訊儀表板」。</span></div></li><div>
<span style="list-style: none;"><ul><li><div><span style="font-size: 12pt;">第一階段：資料清理與整理：</span></div></li><div>
<span style="list-style: none;"><ul><li><div><span style="font-size: 12pt;">將</span> <a href="evernote:///view/143699483/s40/f15a5c44-87db-4eb6-b291-06e7defda429/f15a5c44-87db-4eb6-b291-06e7defda429/602c56da-8aac-4333-858d-f570d9b70e8a" shape="rect" style="font-size: 12pt;" target="_blank">Bergey's Manual</a> <span style="font-size: 12pt;">的上的「微生物資料」，變成實際可用的「微生物資訊」。以 Vol. 3 - The Firmicutes 為例。</span></div></li></ul></span>
</div><li><div><span style="font-size: 12pt;">第二階段：資訊呈現與分析：</span></div></li><div>
<span style="list-style: none;"><ul><li><div><span style="font-size: 12pt;">將「第一階段」蒐集、整理、清理 而得到的「資訊」，設計幾個「資訊儀表板」來呈現。</span></div></li></ul></span>
</div></ul></span>
</div></ul><div>  <img src="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/project_outline-1.png" height="652" width="3424"/><br/></div><div>詳細流程圖請見</div><div><a href="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/Project_mof.html">Project_mof.html</a></div><div><hr/></div><div><span style="font-size: 12pt; color: rgb(227, 0, 0); font-weight: bold;"># 實習分工</span></div><div><br clear="none"/></div><div> <img src="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/WorkFlow%20(1).png" height="696" width="776"/><br/></div><hr/><div><span style="font-size: 12pt; color: rgb(227, 0, 0); font-weight: bold;">#</span> <span style="font-size: 12pt; color: rgb(227, 0, 0); font-weight: bold;">Bergey's Manual</span><span style="font-size: 12pt; color: rgb(227, 0, 0); font-weight: bold;">資料整理步驟</span></div><div><span style="font-size: 12pt; font-weight: bold;">   </span><span style="font-size: 12pt;"><span style="font-size: 12pt; font-weight: bold;">一、</span></span><span style="font-size: 12pt; font-style: italic; font-weight: bold;">Bergey's Manual Vol. 3 - The Firmicutes</span><span style="font-size: 12pt; font-weight: bold;">  PDF檔表格</span> <span style="font-size: 12pt; font-weight: bold;">--&gt;</span> <span style="font-size: 12pt; font-weight: bold;">R,Python packages </span> <span style="background-color: rgb(255, 250, 165); font-size: 12pt; font-weight: bold;-evernote-highlight:true;">--&gt;</span> <span style="font-size: 12pt; font-weight: bold;">CSV files </span></div><div><br clear="none"/></div><ul><li><div><span style="background-color: #fffaa5;font-size: 12pt;-evernote-highlight:true;">步驟一</span><span style="font-size: 12pt;">：為了避免檔案過大，將</span><span style="font-size: 12pt; font-style: italic;">Bergey's Manual </span><span style="font-size: 12pt;">拆解成單頁總共1476個檔案，才可以輸入套件。</span></div><div><a href="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/split%20pdf%20with%20python.html">split pdf with python.html</a></div></li><li><div><span style="background-color: #fffaa5;font-size: 12pt;-evernote-highlight:true;">步驟二</span><span style="font-size: 12pt;">：將1476個檔案，具有表格的檔案留下並且分類和命名。分類成三類型表格，family , genus , species。經過檢查最後確認屬於Genus的表格有28張，Speices則有164張。(</span><span style="font-size: 12pt;">因為時間的限制我們選擇先從資料比較少比較好整理的28個Genus檔案開始整理。</span><span style="font-size: 12pt;">)</span></div><div><br clear="none"/></div></li><li><div><span style="background-color: #fffaa5;font-size: 12pt;-evernote-highlight:true;">步驟三</span><span style="font-size: 12pt;">：利用多種套件將PDF檔轉換成CSV檔案。</span></div></li><li><div><span style="font-size: 12pt;">以下為程式註記。</span></div><div><a href="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/%E7%94%A8pdftables_api%20module%E5%B0%87PDF%20table%E8%BD%89%E6%88%90csv.html">用pdftables_api module將PDF table轉成csv.html</a><a href="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/%E7%94%A8R%E5%9F%B7%E8%A1%8Cpdf%E8%BD%89csv.html">用R執行pdf轉csv.html</a><a href="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/%E7%94%A8pandas%E8%BD%89csv.html">用pandas轉csv.html</a></div></li></ul><div>                        </div><div><span style="font-size: 10pt; color: rgb(50, 135, 18); font-style: italic;">                        註：Extraction（萃取、解析）PDF 表格上的工具或套件</span></div><ul><li><div><span style="font-size: 10pt; font-style: italic;">Tabula</span></div></li><div>
<span style="list-style: none;"><ul><li><div><span style="font-size: 10pt; font-style: italic;">A GUI based software</span></div></li></ul></span>
</div><li><div><span style="font-size: 10pt; font-style: italic;">tabula-py</span></div></li><div>
<span style="list-style: none;"><ul><li><div><span style="font-size: 10pt; font-style: italic;">A Python package. Extract table from PDF into Python DataFrame</span></div></li></ul></span>
</div><li><div><span style="font-size: 10pt; font-style: italic;">tabulizer</span></div></li><div>
<span style="list-style: none;"><ul><li><div><span style="font-size: 10pt; font-style: italic;">An R package. Richest bindings including rich GUI</span></div></li></ul></span>
</div></ul><div><span style="font-style: italic;">    </span></div><div><span style="font-size: 12pt; font-weight: bold;">    二、</span><span style="font-size: 12pt; font-weight: bold;">資料的修復與清理</span></div><ul><li><div><span style="background-color: #fffaa5;font-size: 12pt;-evernote-highlight:true;">步驟一</span><span style="font-size: 12pt;">：TABLE fix (手動更改)。</span></div></li><div>
<span style="list-style: none;"><ul><li><div><span style="font-size: 12pt;">補上表格轉換後的缺漏</span></div></li><li><div><span style="font-size: 12pt;">排除encoding問題，要一律使用半形</span></div></li><li><div><span style="font-size: 12pt;">註解加上去(若是關於reference的註解就不留)</span></div></li><li><div><span style="font-size: 12pt;">沒有資料的打NA(no determine, no data...)</span></div></li><li><div><span style="font-size: 12pt;">℃改_C</span></div></li><li><div><span style="font-size: 12pt;">μ改u</span></div></li><li><div><span style="font-size: 12pt;">格子內value若是文字(方便Data clean用程式輔助整理)</span></div></li><li><div><span style="font-size: 12pt;">用逗點加空格分隔文字(如: acetata, lactate, maltose)</span></div></li><li><div><span style="font-size: 12pt;">註解用逗點分隔文字(如: only observed in</span> <span style="font-size: 12pt; font-style: italic;">B. subtilis</span><span style="font-size: 12pt;">,</span><span style="font-size: 12pt; font-style: italic;">S. aureus</span><span style="font-size: 12pt;">)</span></div></li><li><div><span style="font-size: 12pt;">若有一樣的字串，統一格式(如: Acetate如果出現很多次，統一打成Acetate，別打成acetate)</span></div></li></ul></span>
</div><li><div><span style="background-color: #fffaa5;font-size: 12pt;-evernote-highlight:true;">步驟二</span><span style="font-size: 12pt;">：統一名稱</span></div></li><div>
<span style="list-style: none;"><ul><li><div><span style="font-size: 12pt;">將菌屬名特徵名稱統一(每個TABLE可能用不同名字稱呼相同菌)</span></div></li><div>
<span style="list-style: none;"><ul><li><div><span style="font-size: 12pt;">方法：</span></div></li></ul></span>
</div></ul></span>
</div></ul><ol><li><div><span style="font-size: 12pt;">使用R輸出原始表格中菌屬名稱對照表。</span></div></li><li><div><span style="font-size: 12pt;">人工將相同菌屬不同名稱支欄位統一，反覆校正多次以利後續輸出檔案；並新增新欄位在對照表中。</span></div></li><li><div><span style="font-size: 12pt;">讀入對照表，利用R與Python將原始資料的菌屬名進行更改。</span></div><div><a href="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/rename_genus_names.R">rename_genus_names.R</a>#內含輸出對照表程式</div><div><a href="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/genus.names.csv">genus.names.csv</a>#對照表</div></li></ol><ul><li><div><span style="font-size: 12pt;">將特性名稱統一</span></div></li><div>
<span style="list-style: none;"><ul><li><div><span style="font-size: 12pt;">方法：</span></div></li><div>
<span style="list-style: none;"><ul><li><div><span style="font-size: 12pt;">用R輸出同表格所有生化特性名稱。</span></div><div><img src="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/1869_0.png" height="60" width="300"/></div></li><li><div><span style="font-size: 12pt;">手動更改，確定新名稱成一張對照表，並依照對照表利用R進行改名。</span></div><div><a href="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/charac_reference2.ex.xlsx">charac_reference2.ex.xlsx</a><a href="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/rename_characname.R">rename_characname.R</a></div></li></ul></span>
</div></ul></span>
</div><li><div><span style="font-size: 12pt;">將來自不同表格對同一特性之敘述統一</span></div></li><div>
<span style="list-style: none;"><ul><li><div><span style="font-size: 12pt;">方法：</span></div></li></ul></span>
</div></ul><ol><li><div><span style="font-size: 12pt;">用R將所有相同特性類別的表格資料集合成一個檔案。</span></div></li><li><div><span style="font-size: 12pt;">用python輔助加上手動把這些相同類別之特性分別統一改寫，改寫方式如情境說明。</span></div></li><li><div><span style="font-size: 12pt;">利用R將改寫之檔案覆寫回原始檔案。</span></div><div><br clear="none"/></div></li></ol><ul><div>
<span style="list-style: none;"><ul><li><div><span style="font-size: 12pt;">以下為統一特性之情境說明</span></div></li><div>
<span style="list-style: none;"><ul><li><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(77, 206, 29); font-weight: bold;">##情況一</span></span></div><div><span style="font-size: 12pt; color: rgb(77, 206, 29);">以Morphology為例子，在不同TABLE中他有兩種敘述方式</span><span style="font-size: 12pt; color: rgb(77, 206, 29); font-weight: bold; text-decoration: underline;">&lt;圖1.1&gt;</span><span style="font-size: 12pt; color: rgb(77, 206, 29);">：</span></div><div><span style="font-size: 12pt; color: rgb(77, 206, 29);">     1.欄位值為不同細胞形狀的敘述。<span style="font-size: 12pt; color: rgb(77, 206, 29); font-weight: bold; text-decoration: underline;">&lt;圖1.2&gt;</span></span></div><div><span style="font-size: 12pt; color: rgb(77, 206, 29);">     2. row name本身就是細胞形狀</span><span style="font-size: 12pt; color: rgb(77, 206, 29);">的敘述，value為+, -, or variable。</span><span style="font-size: 12pt; color: rgb(77, 206, 29);">決定將所有的敘述方法統一改為後者。<span style="font-size: 12pt; color: rgb(77, 206, 29); font-weight: bold; text-decoration: underline;">&lt;圖1.3&gt;</span></span></div><div><span style="font-size: 12pt; color: rgb(77, 206, 29);">因此類似的特性都以</span><span style="font-size: 12pt; color: rgb(77, 206, 29); font-weight: bold; text-decoration: underline;">&lt;圖1.4&gt;</span><span style="font-size: 12pt; color: rgb(77, 206, 29);">之方式重新整理。</span></div><div><span style="color: rgb(77, 206, 29);">   </span></div><div><img src="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/rename_value.PNG" height="321" width="541"/> </div><div style="text-align: left;">&lt;圖1.1&gt;</div><div><img src="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/rename_value1.PNG" height="53" width="1002"/></div><div>&lt;圖1.2&gt;</div><div><img src="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/rename_value2.PNG" height="49" width="634"/></div><div>&lt;圖1.3&gt;</div><div><img src="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/rename_value3.PNG" height="273" width="910"/></div><div>&lt;圖1.4&gt;</div><div><br clear="none"/></div></li><li><div><span style="font-size: 12pt; color: rgb(77, 206, 29); font-weight: bold;">##情況二</span></div><div><span style="font-size: 12pt; color: rgb(77, 206, 29);">以Murein type欄位為例</span><span style="font-size: 12pt; color: rgb(77, 206, 29); font-weight: bold;">&lt;圖2.1&gt;</span><span style="font-size: 12pt; color: rgb(77, 206, 29);">，此欄位並非'+',' -' ,'variable'之特性敘述，而是對菌屬特性的詳述，但欄位中包含多種敘述。礙於儀表板呈現方式，因上述原因無法在本儀表板成為選項功能。因</span><span style="font-size: 12pt; color: rgb(77, 206, 29);">此統一將菌屬特性下的欄位值寫入列名的括號中補充敘述，將欄位值皆統一改為</span><span style="font-size: 12pt; color: rgb(77, 206, 29);">'+',' -' ,'variable'</span><span style="font-size: 12pt; color: rgb(77, 206, 29);">。</span><span style="font-size: 12pt; color: rgb(77, 206, 29); font-weight: bold;">&lt;圖2.2&gt;</span><span style="font-size: 12pt; color: rgb(77, 206, 29);">以利建立儀表板選項。</span><span style="color: rgb(77, 206, 29);"> </span><img src="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/select_rename.PNG" height="60" width="922"/></div><div>&lt;圖2.1&gt;</div><div><img src="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/rename_value_select.PNG" height="202" width="739"/></div><div>&lt;圖2.2&gt;</div><div><span style="font-size: 12pt; color: rgb(77, 206, 29); font-weight: bold;">##情況三</span></div><div><span style="font-size: 12pt; color: rgb(77, 206, 29);">數值的特性敘述，以cell size為例子</span><span style="font-size: 12pt; color: rgb(77, 206, 29); font-weight: bold;">&lt;圖3.1&gt;</span><span style="font-size: 12pt; color: rgb(77, 206, 29);">，將它分成width 及 length兩方面</span><span style="font-size: 12pt; color: rgb(77, 206, 29); font-weight: bold;">&lt;圖3.2&gt;</span><span style="font-size: 12pt; color: rgb(77, 206, 29);">，以利製圖。</span><img src="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/rename_value_numeric.PNG" height="48" width="528"/></div><div>&lt;圖3.1&gt;</div><div><img src="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/cell_size_length.PNG" height="182" width="222"/> (cell length)  <img src="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/cell_size_width.PNG" height="199" width="279"/> (cell width)</div><div>&lt;圖3.2&gt;</div><div><br clear="none"/></div><div><br clear="none"/></div></li></ul></span>
</div></ul></span>
</div><li><div><span style="background-color: #fffaa5;font-size: 12pt;-evernote-highlight:true;">整理完成之檔案</span></div></li></ul><div><br clear="none"/></div><ul><li><div><span style="font-size: 12pt;"><span style="font-size: 12pt;">表格資料：</span></span><a href="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/renames3.2.rar">renames3.2.rar</a></div></li><li><div><span style="font-size: 12pt;"><span style="font-size: 12pt;">菌屬資料：</span></span><a href="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/080Data_genus_and_function.rar">080Data_genus_and_function.rar</a></div></li><li><div><span style="font-size: 12pt;"><span style="font-size: 12pt;">菌屬特性資料：</span></span><a href="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/no_branch_data(2.0).rar">no_branch_data(2.0).rar</a><a href="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/branch_data.rar">branch_data.rar</a></div></li></ul><hr/></div><div><span style="font-size: 12pt; color: rgb(227, 0, 0); font-weight: bold;"># </span><span style="font-size: 12pt; color: rgb(227, 0, 0); font-weight: bold;">儀表板構想心智圖</span></div><div><img src="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/%E8%B3%87%E8%A8%8A%E5%84%80%E8%A1%A8%E6%9D%BF.png" height="2191" width="4473"/><br/></div><hr/><div><div><span style="font-size: 12pt; color: rgb(227, 0, 0); font-weight: bold;"># 儀表板建立</span></div><div><a href="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/Dashboard%20Database%20Establishment.pptx">Dashboard Database Establishment.pptx</a></div><ul><li><div><span style="font-size: 12pt;"><span style="background-color: #fffaa5;font-size: 12pt;-evernote-highlight:true;">儀表板使用情境設想</span><span style="font-size: 12pt;">：</span></span></div></li><div>
<span style="list-style: none;"><ul><li><div><span style="-en-paragraph:true;"><span style="font-size: 12pt;">進行菌種鑑定中的人，想以現有的資料得知可能的菌種。</span></span></div></li><li><div><span style="font-size: 12pt;">欲分離已知菌的人，想知道分離此菌的方法。</span></div></li><li><div><span style="font-size: 12pt;">綜觀有紀錄的菌屬或菌種的特性，實踐更多應用。</span></div></li><li><div><span style="font-size: 12pt;">詳細請見8/1報告投影片：</span></div><div><a href="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/%E8%A6%8F%E5%8A%83%E4%B8%AD.pptx">規劃中.pptx</a></div></li></ul></span>
</div><li><div><span style="font-size: 12pt;"><span style="font-size: 12pt;background-color: rgb(255, 250, 165);-evernote-highlight:true;">儀表板的功能(</span><span style="font-size: 12pt; background-color: rgb(255, 250, 165); text-decoration: underline;-evernote-highlight:true;">以菌屬搜尋其特性、<span style="font-size: 12pt; background-color: rgb(255, 250, 165); text-decoration: underline; color: rgb(1, 1, 1);-evernote-highlight:true;">以菌屬之特性搜尋菌屬、<span style="font-size: 12pt; background-color: rgb(255, 250, 165); text-decoration: underline; color: rgb(1, 1, 1);-evernote-highlight:true;">分類樹(使用菌種資料)</span></span></span><span style="font-size: 12pt;background-color: rgb(255, 250, 165);-evernote-highlight:true;">)</span><span style="font-size: 12pt; color: rgb(54, 101, 238);">：</span></span></div></li><div>
<span style="list-style: none;"><ul><li><div><span style="font-size: 12pt;"><span style="font-size: 12pt; text-decoration: underline;">以菌屬搜尋其特性</span></span></div></li><div>
<span style="list-style: none;"><ul><li><div><span style="font-size: 12pt;">提供所選擇之菌屬特徵的特徵表。</span></div></li></ul></span>
</div><li><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(1, 1, 1); text-decoration: underline;">以菌屬之特性搜尋菌屬</span></span></div></li><div>
<span style="list-style: none;"><ul><li><div><span style="font-size: 12pt; color: rgb(1, 1, 1);">依照欄位值的不同，在儀表板做三種選項</span></div></li></ul></span>
</div></ul></span>
</div></ul><div><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 220px;"/><col style="width: 955px;"/></colgroup><tbody><tr><td rowspan="1" style="background-color: rgb(87, 183, 121); border: 1px solid rgb(70, 146, 97); width: 220px; padding: 8px;"><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 255, 255);">Radio button</span></span></div></td><td rowspan="1" style="border: 1px solid rgb(204, 204, 204); width: 955px; padding: 8px;"><div><span style="font-size: 12pt; color: rgb(1, 1, 1);">點選某特性後，出現三個選項，分別為"+",  "-",  "Variable"，點選其中選項之後列出相對應的菌屬。</span></div></td></tr><tr><td rowspan="1" style="background-color: rgb(87, 183, 121); border: 1px solid rgb(70, 146, 97); width: 220px; padding: 8px;"><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 255, 255);">Select box</span></span></div></td><td rowspan="1" style="border: 1px solid rgb(204, 204, 204); width: 955px; padding: 8px;"><div><span style="font-size: 12pt; color: rgb(1, 1, 1);">點選某特性後，出現全部對於該特徵的描述選項，點選其中選項後列出相對應的菌屬。</span></div></td></tr><tr><td rowspan="1" style="background-color: rgb(87, 183, 121); border: 1px solid rgb(70, 146, 97); width: 220px; padding: 8px;"><div><span style="font-size: 12pt; color: rgb(255, 255, 255);">Slider </span><span style="font-size: 12pt; color: rgb(255, 255, 255);">搭配 ggplot2 圖表</span></div></td><td rowspan="1" style="border: 1px solid rgb(204, 204, 204); width: 955px; padding: 8px;"><div><span style="font-size: 12pt; color: rgb(1, 1, 1);">點選某特性後，出現數值範圍的Slider，可以選擇要查看的範圍上下限，之後以ggplot2作出視覺化的圖。</span></div></td></tr></tbody></table><div><span style="font-size: 12pt;">詳見下表</span></div><div><a href="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/check_name_new.xlsx">check_name_new.xlsx</a></div><ul><div>
<span style="list-style: none;"><ul><li><div><span style="font-size: 12pt;"><span style="font-size: 12pt; text-decoration: underline;">分類樹(使用菌種資料)</span></span></div></li><div>
<span style="list-style: none;"><ul><li><div><span style="font-size: 12pt;">點選欲比較菌種及特性，作出以選擇的特性分類的菌種分類樹。</span></div><div><br clear="none"/></div></li></ul></span>
</div></ul></span>
</div><li><div><span style="font-size: 12pt;background-color: #fffaa5;-evernote-highlight:true;"><span style="background-color: #fffaa5;font-size: 12pt;-evernote-highlight:true;">儀表板三種功能之資料庫的建立：</span></span></div></li><div>
<span style="list-style: none;"><ul><li><div><span style="font-size: 12pt;">儀表板儲存資料之型態</span></div></li></ul></span>
</div></ul></div><div><div><br/></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 235px;"/><col style="width: 258px;"/><col style="width: 258px;"/></colgroup><tbody><tr><td rowspan="1" style="vertical-align: middle; background-color: rgb(87, 183, 121); border: 1px solid rgb(70, 146, 97); width: 235px; padding: 8px;"><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 255, 255); font-weight: bold;">儀表板功能</span></span></div></td><td rowspan="1" style="vertical-align: middle; background-color: rgb(87, 183, 121); border: 1px solid rgb(70, 146, 97); width: 258px; padding: 8px;"><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 255, 255); font-weight: bold;">資料型態</span></span></div></td><td rowspan="1" style="vertical-align: middle; background-color: rgb(87, 183, 121); border: 1px solid rgb(70, 146, 97); width: 258px; padding: 8px;"><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 255, 255); font-weight: bold;">選擇原因</span></span></td></tr><tr><td rowspan="1" style="vertical-align: middle; background-color: rgb(87, 183, 121); border: 1px solid rgb(70, 146, 97); width: 235px; padding: 8px;"><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 255, 255); font-weight: bold;">菌屬找特性</span></span></div></td><td rowspan="1" style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 258px; padding: 8px;"><div><span style="font-size: 12pt;">JSON</span></div></td><td rowspan="1" style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 258px; padding: 8px;"><div><span style="font-size: 12pt;">能在python及R間互相傳遞，能夠分頭作業。</span></div></td></tr><tr><td rowspan="1" style="vertical-align: middle; background-color: rgb(87, 183, 121); border: 1px solid rgb(70, 146, 97); width: 235px; padding: 8px;"><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 255, 255); font-weight: bold;">特性找菌屬</span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 255, 255); font-weight: bold;">(Radio botton, Select box)</span></span></div></td><td rowspan="1" style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 258px; padding: 8px;"><div><span style="font-size: 12pt;">JSON</span></div></td><td rowspan="1" style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 258px; padding: 8px;"><div><span style="font-size: 12pt;">能在python及R間互相傳遞，能夠分頭作業。</span></div></td></tr><tr><td rowspan="1" style="vertical-align: middle; background-color: rgb(87, 183, 121); border: 1px solid rgb(70, 146, 97); width: 235px; padding: 8px;"><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 255, 255); font-weight: bold;">特性找菌屬</span></span></div><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 255, 255); font-weight: bold;">(Slider and ggplot2)</span></span></div></td><td rowspan="1" style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 258px; padding: 8px;"><div><span style="font-size: 12pt;">csv</span></div><div><br clear="none"/></div></td><td rowspan="1" style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 258px; padding: 8px;"><div><span style="font-size: 12pt;">作圖需要。</span></div></td></tr><tr><td rowspan="1" style="vertical-align: middle; background-color: rgb(87, 183, 121); border: 1px solid rgb(70, 146, 97); width: 235px; padding: 8px;"><div><span style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(255, 255, 255); font-weight: bold;">分類樹</span></span></div></td><td rowspan="1" style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 258px; padding: 8px;"><span style="font-size: 12pt;">dataframe delivered from R shiny</span></td><td rowspan="1" style="vertical-align: middle; border: 1px solid rgb(204, 204, 204); width: 258px; padding: 8px;"><span style="font-size: 12pt;">分類樹演算法需要。</span></td></tr></tbody></table><ul><li><div><span style="font-size: 12pt;">菌屬找特性JSON file的建立</span></div></li><div>
<span style="list-style: none;"><ul><li><div><span style="font-size: 12pt;">方法：</span></div></li></ul></span>
</div></ul><ol><li><div><span style="font-size: 12pt;">由整理</span><span style="font-size: 12pt;">後之csv將同菌屬的菌所有資料抓到一的新檔案</span></div><div><a href="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/rename_characname.R">rename_characname.R</a></div></li><li><div><span style="font-size: 12pt;">合併來自不同表格相同特徵的資料</span></div><div><a href="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/merge_charac.html">merge_charac.html</a></div></li><li><div><span style="font-size: 12pt;">合併所有菌屬的資料，一併轉成JSON</span></div><div><a href="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/prepareJSON.R">prepareJSON.R</a></div></li><li><div><span style="font-size: 12pt;">完成檔案</span></div><div><a href="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/mygenus.JSON">mygenus.JSON</a></div></li></ol></div><div><br clear="none"/></div><ul><li><div><span style="font-size: 12pt;">特性找菌屬JSON file的建立</span></div></li><div>
<span style="list-style: none;"><ul><li><div><span style="font-size: 12pt;">方法：</span></div></li></ul></span>
</div></ul><ol><li><div><span style="font-size: 12pt;">由整理後之csv，將來自不同TABLE對不同菌屬相同的特性的敘述集結到同csv</span></div><div><a href="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/output_charac_file.R">output_charac_file.R</a></div></li><li><div><span style="font-size: 12pt;">依照決定好的儀表板UI轉換成他們需要的資料型態</span></div><div><span style="font-size: 12pt;">#Radio button(branched and no branched)</span></div><div><a href="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/charac_to_genus_radio_button.html">charac_to_genus_radio_button.html</a></div><div><span style="font-size: 12pt;">#Select box</span></div><div><a href="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/charac_to_genus_select%20.html">charac_to_genus_select .html</a></div></li><li><div><span style="font-size: 12pt;">合併成JSON，並轉換成R能夠檢索的型態</span></div><div><a href="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/function_to_genus_toJSON.R">function_to_genus_toJSON.R</a></div></li><li><div><span style="font-size: 12pt;">完成檔案</span></div></li></ol><ol><li><div>Radio button(branched)</div><div><a href="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/funcs_branched(radio_button).JSON">funcs_branched(radio_button).JSON</a></div></li><li><div>Radio button(no branched)</div><div><a href="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/funcs_no_branched(radio_button).JSON">funcs_no_branched(radio_button).JSON</a></div></li><li><div>Select box</div><div><a href="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/funcs_select.JSON">funcs_select.JSON</a></div></li></ol><div><br clear="none"/></div><ul><li><div><span style="font-size: 12pt;">分類樹</span></div></li><div>
<span style="list-style: none;"><ul><li><div><span style="font-size: 12pt;">說明：</span></div></li><div>
<span style="list-style: none;"><ol><li><div><span style="font-size: 12pt;">因為python為物件導向程式語言，所以分類樹演算法利用python所編寫。而視覺化部分因R具有繪圖套件，所以選擇以R進行繪圖。</span></div></li><li><div><span style="font-size: 12pt;">因為菌種的鑑定往往比菌屬鑑定步驟複雜，所以選擇繪製菌種的分類樹，並且菌種資料較為完整。</span></div></li></ol></span>
</div><li><div><span style="font-size: 12pt;">使用者在儀表板上點選，欲分類的菌種和特徵。可以產生一個dataframe儲存菌種特徵，這些特徵皆為'+','-'值，以此為基礎來繪製二元(+,-)分類樹。</span></div></li><li><div><span style="font-size: 12pt;">在python中，將輸入的dataframe轉換成dictionary，根據dictionary將資料，將菌種用特性分類。利用類似BFS(Breadth-First-Search)演算法，將菌屬資料儲存在二元分類樹(Binary Tree)資料結構的每個節點。最終輸出二元分類樹的資料成一個list。</span></div><div><a href="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/Class_Tree_andTodict.py">Class_Tree_andTodict.py</a></div></li><li><div><span style="font-size: 12pt;">輸出的list會經由在R中會經由套件"reticulate"轉換成R中vector資料結構，再經由R套件data.tree進行繪圖。礙於技術考量現在只能做出4層的分類樹。</span></div></li><div>
<span style="list-style: none;"><ul><li><div>(一層~四層特性程式碼)</div><div><a href="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/tree_plot_from_py_n1.R">tree_plot_from_py_n1.R</a></div><div><a href="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/tree_plot_from_py_n2.R">tree_plot_from_py_n2.R</a></div><div><a href="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/tree_plot_from_py_n3.R">tree_plot_from_py_n3.R</a></div><div><a href="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/tree_plot_from_py_n4.R">tree_plot_from_py_n4.R</a></div></li><li><div>(五層以上)</div></li></ul><div>          <a href="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/tree_plot_general.R">tree_plot_general.R</a></div><ul><li><div><span style="font-size: 12pt;">四層結果圖</span></div><div><span style="font-size: 12pt;">紅色代表該群菌種在該特性分類下為"+"反應，藍色則為"-"反應。</span></div><div><img src="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/classify_tree.PNG" height="424" width="722"/></div><div><br/></div></li><li><div><span style="font-size: 12pt;">五層結果圖：</span></div><div><span style="font-size: 12pt;">五層為R data.tree套件利用不同的算法，所輸出的圖，僅有末端有菌屬。節點部分並無被分類。</span></div><div><br/></div><div><img src="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/above_5layer.PNG" height="450" width="866"/></div></li></ul></span>
</div></ul></span>
</div></ul><div><br clear="none"/></div><hr/><div><font style="font-size: 12pt;"><span style="font-size: 12pt; color: rgb(227, 0, 0); font-weight: bold;"># 儀表板呈現</span></font></div><div><a href="http://120.126.47.90/MOF/" style="font-size: 16px; color: rgb(227, 0, 0); font-weight: bold;">http://120.126.47.90/MOF/</a></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 631px;"/><col style="width: 709px;"/></colgroup><tbody><tr><td style="border: 1px solid rgb(219, 219, 219); width: 631px; padding: 8px;"><div><span style="font-size: 24px; color: rgb(83, 27, 147);">設計圖：</span></div><div><span style="font-size: 24px; color: rgb(83, 27, 147);">（draw by 雅惠 with pencil）</span></div></td><td style="border: 1px solid rgb(219, 219, 219); width: 709px; padding: 8px;"><div><span style="font-size: 24px; color: rgb(83, 27, 147);">實際應用：</span></div><div><span style="font-size: 24px; color: rgb(83, 27, 147);">（Shiny dashboard on R by 淯元）</span></div></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 631px; padding: 8px;"><div><img src="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/%E5%84%80%E8%A1%A8%E6%9D%BF-1.jpg" height="765" width="1237"/><br/></div></td><td style="border: 1px solid rgb(219, 219, 219); width: 709px; padding: 8px;"><div><img src="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202018-08-27%20%E4%B8%8A%E5%8D%8811.51.24.png" height="900" width="1440"/><br/></div><div><br/></div></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 631px; padding: 8px;"><div><img src="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/%E5%84%80%E8%A1%A8%E6%9D%BF-2.jpg" height="683" width="1220"/><br/></div></td><td style="border: 1px solid rgb(219, 219, 219); width: 709px; padding: 8px;"><div><img src="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202018-08-27%20%E4%B8%8B%E5%8D%8812.32.31.png" height="900" width="1446"/><br/></div><div><span style="color: rgb(0, 143, 0); text-decoration: underline;">資料處理-JSON/</span><span style="caret-color: rgb(0, 143, 0); color: rgb(0, 143, 0); text-decoration: underline;">資料清理</span></div><div><img src="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202018-08-27%20%E4%B8%8B%E5%8D%8812.32.49.png" height="900" width="1442"/><br/></div></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 631px; padding: 8px;"><div><img src="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/%E5%84%80%E8%A1%A8%E6%9D%BF-3.jpg" height="681" width="1218"/><br/></div></td><td style="border: 1px solid rgb(219, 219, 219); width: 709px; padding: 8px;"><div><img src="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202018-08-27%20%E4%B8%8B%E5%8D%8812.33.04.png" height="900" width="1440"/><br/></div><div><br/></div><div><img src="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202018-08-27%20%E4%B8%8B%E5%8D%8812.33.23.png" height="900" width="1440"/><br/></div><div><span style="color: rgb(0, 145, 147); text-decoration: underline;">ggplot2作圖</span></div><div><img src="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202018-08-27%20%E4%B8%8B%E5%8D%8812.34.18.png" height="900" width="1440"/><br/></div></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 631px; padding: 8px;"><div><img src="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/%E5%84%80%E8%A1%A8%E6%9D%BF-4.jpg" height="680" width="1217"/><br/></div></td><td style="border: 1px solid rgb(219, 219, 219); width: 709px; padding: 8px;"><div><img src="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202018-08-27%20%E4%B8%8B%E5%8D%882.16.02.png" height="900" width="1440"/><br/></div><div><img src="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202018-08-27%20%E4%B8%8B%E5%8D%882.16.08.png" height="900" width="1440"/><br/></div><div><span style="color: rgb(148, 55, 255); text-decoration: underline;">樹狀圖</span></div><div><img src="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202018-08-27%20%E4%B8%8B%E5%8D%882.16.18.png" height="900" width="1440"/><br/></div><div>未完待續...希望可以整合各個表格的內容，而不僅限於單一個表格</div></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 631px; padding: 8px;"><div><img src="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/%E5%84%80%E8%A1%A8%E6%9D%BF-5.jpg" height="681" width="1217"/><br/></div></td><td style="border: 1px solid rgb(219, 219, 219); width: 709px; padding: 8px;"><div><img src="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/%E8%9E%A2%E5%B9%95%E5%BF%AB%E7%85%A7%202018-08-27%20%E4%B8%8B%E5%8D%882.16.42.png" height="900" width="1440"/><br/></div><div><span style="color: rgb(0, 150, 255); text-decoration: underline;">readr/tidyr/tibble 做表格資料處理</span></div></td></tr></tbody></table><div><br/></div><div><span style="font-size: 24px; color: rgb(0, 143, 0);">資料處理-JSON/</span><span style="font-size: 24px; caret-color: rgb(0, 143, 0); color: rgb(0, 143, 0);">資料清理</span></div><div>先前已提及</div><hr/><div><span style="font-size: 24px; color: rgb(148, 55, 255);">樹狀圖</span></div><div><span style="caret-color: rgb(105, 170, 53);">先前已提及</span></div><hr/><div><span style="font-size: 24px; color: rgb(0, 145, 147);">ggplot2作圖</span></div><div><a href="%3C99%3E%20%E5%AF%A6%E7%BF%92%E7%B5%90%E6%9E%9C%E5%A0%B1%E5%91%8A.html.resources/plot%20markdown.html">plot markdown.html</a></div><hr/><div><span style="font-size: 24px; color: rgb(0, 150, 255);">readr/tidyr/tibble 做表格資料處理</span></div><ul><li><div><span style="caret-color: rgb(0, 150, 255);">合併菌屬的資料</span></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 12px; color: rgb(0, 144, 81);">######################################</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(0, 144, 81);">### merge the selected genera data ###</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(0, 144, 81);">######################################</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">genus_tidy_data = function(genera){</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">  </span><span style="font-family: Monaco; font-size: 12px; color: rgb(0, 144, 81);"># get data (list)</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">  data_tmp = mygenus[genera]</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">  </span><span style="font-family: Monaco; font-size: 12px; color: rgb(0, 144, 81);"># add new column "genus name" avoid 'full_join' going wrong</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">  name_func = function(genus_name){</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    data_tmp[[genus_name]] %&gt;% mutate("Genus name" = genus_name)</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">  }</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">  data_tmp = genera %&gt;% map(.,name_func)</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">  names(data_tmp) = genera</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">  </span><span style="font-family: Monaco; font-size: 12px; color: rgb(0, 144, 81);"># merge data and put "genus name" to first column</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">  data_tmp = data_tmp %&gt;%</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    Reduce(function(...){full_join(...)},.) %&gt;%</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    select_if(., function(col) sum(!is.na(col)) != 1 ) %&gt;%</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    column_to_rownames(., var = "Genus name") %&gt;%</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    rownames_to_column(., var = "Genus name")</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">}</span></div></div><div><span style="caret-color: rgb(51, 51, 51); color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;;">建立一個function：</span></div><ul><li><div><span style="caret-color: rgb(51, 51, 51); color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;;">輸入：選出菌屬的列表(list)</span></div></li><li><div><span style="caret-color: rgb(51, 51, 51); color: rgb(51, 51, 51);">輸出：合併後的表格</span></div></li><li><div><span style="caret-color: rgb(51, 51, 51); color: rgb(51, 51, 51);">作法：</span></div></li><div>
<span style="list-style: none;"><ol><li><div><span style="caret-color: rgb(51, 51, 51); color: rgb(51, 51, 51);">先做一個只有菌屬名的表格，以防選到完全沒有重疊的兩個菌屬表格，而造成合併的時候會出錯</span></div></li><li><div><span style="caret-color: rgb(51, 51, 51); color: rgb(51, 51, 51);">合併表格</span></div></li><li><div><span style="caret-color: rgb(51, 51, 51); color: rgb(51, 51, 51);">選出至少有兩個值的特徵作顯示</span></div></li><li><div><span style="caret-color: rgb(51, 51, 51); color: rgb(51, 51, 51);">重複做「列名、欄位」的轉換，讓菌屬名在第一欄顯示</span></div></li></ol></span>
</div></ul><div><br/></div><div><span style="caret-color: rgb(51, 51, 51); color: rgb(51, 51, 51);">程式碼函數列表</span></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 199px;"/><col style="width: 479px;"/></colgroup><tbody><tr><td style="border: 1px solid rgb(219, 219, 219); width: 199px; padding: 8px;"><div><span style="color: rgb(51, 51, 51);">mutate</span></div></td><td style="border: 1px solid rgb(219, 219, 219); width: 479px; padding: 8px;"><div><span style="color: rgb(51, 51, 51);">新增一新欄位</span></div></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 199px; padding: 8px;"><div><span style="color: rgb(51, 51, 51);">%&gt;%</span></div></td><td style="border: 1px solid rgb(219, 219, 219); width: 479px; padding: 8px;"><div><span style="color: rgb(51, 51, 51);">pipe 運算子（巢狀結構的改寫）</span></div><div><span style="color: rgb(51, 51, 51);">Ex: </span></div><div><span style="color: rgb(51, 51, 51);">name &lt;- sub( “^\\d+”, “”, colnames(table) )</span></div><div><span style="color: rgb(51, 51, 51);">相當於</span></div><div><span style="color: rgb(51, 51, 51);">name &lt;- table %&gt;% colnames(.) %&gt;% sub( “^\\d+”, “”, .)</span></div></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 199px; padding: 8px;"><div><span style="color: rgb(51, 51, 51);">full_join</span></div></td><td style="border: 1px solid rgb(219, 219, 219); width: 479px; padding: 8px;"><div><span style="color: rgb(51, 51, 51);">合併表格</span></div></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 199px; padding: 8px;"><div><span style="color: rgb(51, 51, 51);">Reduce </span></div></td><td style="border: 1px solid rgb(219, 219, 219); width: 479px; padding: 8px;"><div><span style="color: rgb(51, 51, 51);">簡化重複的函數（用法難...仍需查資料）</span></div></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 199px; padding: 8px;"><div><span style="color: rgb(51, 51, 51);">select_if</span></div></td><td style="border: 1px solid rgb(219, 219, 219); width: 479px; padding: 8px;"><div><span style="color: rgb(51, 51, 51);">符合後方函數條件的欄位才選取出來</span></div></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 199px; padding: 8px;"><div><span style="color: rgb(51, 51, 51);">column_to_rownames</span></div></td><td style="border: 1px solid rgb(219, 219, 219); width: 479px; padding: 8px;"><div><span style="color: rgb(51, 51, 51);">欄位變成列名</span></div></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 199px; padding: 8px;"><div><span style="color: rgb(51, 51, 51);">rownames_</span><span style="color: rgb(51, 51, 51);">to_</span><span style="color: rgb(51, 51, 51);">column</span></div></td><td style="border: 1px solid rgb(219, 219, 219); width: 479px; padding: 8px;"><div><span style="color: rgb(51, 51, 51);">列名變成欄位</span></div></td></tr></tbody></table><ul><li><div><span style="color: rgb(51, 51, 51);">篩選出菌種的資料</span></div></li></ul><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 12px; color: rgb(0, 144, 81);">#######################################################</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(0, 144, 81);">### filter the selected species data and clean data ###</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(0, 144, 81);">#######################################################</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(0, 144, 81);"># filter function</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">filter_species &lt;- function(each_species){</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">  each_table &lt;- species_data %&gt;% filter(., SpeciesName == each_species)</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">  </span><span style="font-family: Monaco;">return(each_table)</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">}</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(0, 144, 81);"># form a wanted data table</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">species_tidy_data &lt;- function(species){</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">  </span><span style="font-family: Monaco; font-size: 12px; color: rgb(0, 144, 81);"># filter (list)</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">  data_temp &lt;- species %&gt;% map(., filter_species ) %&gt;%</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    </span><span style="font-family: Monaco; font-size: 12px; color: rgb(0, 144, 81);"># merge data</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    Reduce(function(...){bind_rows(...)},.) %&gt;%</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    </span><span style="font-family: Monaco; font-size: 12px; color: rgb(0, 144, 81);"># get rid of 'NA'</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    select_if(., function(col) sum(!is.na(col)) == length(species)) %&gt;%</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    </span><span style="font-family: Monaco; font-size: 12px; color: rgb(0, 144, 81);"># get rid of the value existing words but not loss species name</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    select_if(., function(col) sum(grepl("\\w", col)) == 0 || sum(grepl("\\w", col)) == length(species) ) %&gt;%</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    </span><span style="font-family: Monaco; font-size: 12px; color: rgb(0, 144, 81);"># get rid of the features existing same values between selected features</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">    select_if(., function(col) sum(grepl("\\+", col)) != length(species) &amp;&amp; sum(grepl("\\-", col)) != length(species) )</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">  return(data_temp)</span></div><div><span style="font-family: Monaco; font-size: 12px; color: rgb(51, 51, 51);">}</span></div></div><div><span style="font-size: 18px; caret-color: rgb(51, 51, 51); color: rgb(51, 51, 51);">目的：輸入菌種名，輸出所選取菌種名的表格</span></div><div><span style="font-size: 18px; caret-color: rgb(51, 51, 51); color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;;">作法：建立兩個函數（一主程式，一副程式）</span></div><ul><li><div><span style="caret-color: rgb(51, 51, 51); color: rgb(51, 51, 51);">主：輸入菌種名，輸出對應的合併表格</span></div></li><div>
<span style="list-style: none;"><ol><li><div>利用重複做的程式（map, lapply）丟入副程式中，得到一個列表有著不同的菌種名，各菌種名底下有各自的表格資料</div></li><li><div>利用函數併成一個大表格</div></li><li><div>去除任何有NA的資料的欄位</div></li><li><div>去除有文字資料的欄位</div></li><li><div>去除完全一樣的資料的欄位</div></li></ol></span>
</div><li><div><span style="caret-color: rgb(51, 51, 51); color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;;">副</span><span style="caret-color: rgb(51, 51, 51); color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;;">：抓取菌名對應資料的函數</span></div></li><div>
<span style="list-style: none;"><ul><li><div><span style="caret-color: rgb(51, 51, 51); color: rgb(51, 51, 51);">符合菌名，篩選輸出表格</span></div></li></ul></span>
</div></ul><div><br/></div><div><span style="caret-color: rgb(51, 51, 51); color: rgb(51, 51, 51);">程式碼函數列表</span></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 148px;"/><col style="width: 543px;"/></colgroup><tbody><tr><td style="border: 1px solid rgb(219, 219, 219); width: 148px; padding: 8px;"><div><span style="color: rgb(51, 51, 51);">filter</span></div></td><td style="border: 1px solid rgb(219, 219, 219); width: 543px; padding: 8px;"><div><span style="color: rgb(51, 51, 51);">篩選出符合條件的列</span></div></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 148px; padding: 8px;"><div><span style="color: rgb(51, 51, 51);">bind_rows</span></div></td><td style="border: 1px solid rgb(219, 219, 219); width: 543px; padding: 8px;"><div><span style="color: rgb(51, 51, 51);">合併列</span></div></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 148px; padding: 8px;"><div><span style="color: rgb(51, 51, 51);">grepl</span></div></td><td style="border: 1px solid rgb(219, 219, 219); width: 543px; padding: 8px;"><div><span style="color: rgb(51, 51, 51);">比對字串，回傳真假值</span></div></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 148px; padding: 8px;"><div><span style="color: rgb(51, 51, 51);">length</span></div></td><td style="border: 1px solid rgb(219, 219, 219); width: 543px; padding: 8px;"><div><span style="color: rgb(51, 51, 51);">計算資料長度</span></div></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 148px; padding: 8px;"><div><span style="color: rgb(51, 51, 51);">sum</span></div></td><td style="border: 1px solid rgb(219, 219, 219); width: 543px; padding: 8px;"><div><span style="color: rgb(51, 51, 51);">加總</span></div></td></tr></tbody></table><div><span style="color: rgb(51, 51, 51);">參考資料：</span><a href="https://www.evernote.com/l/AT0JACKtG9FG9bfqOaDfvUKRCSacgw8Xe2U" style="color: rgb(51, 51, 51);">Cheatsheet</a></div><hr/><div><span style="font-size: 24px; color: rgb(255, 147, 0);">Shiny 程式大綱</span></div><div style="font-size: 24px;"><br/></div><div>參考資料：<a href="https://shiny.rstudio.com/images/shiny-cheatsheet.pdf">Shiny_cheatsheet</a></div><table style="border-collapse: collapse; min-width: 100%;"><colgroup><col style="width: 130px;"/><col style="width: 238px;"/><col style="width: 128px;"/><col style="width: 246px;"/></colgroup><tbody><tr><td colspan="4" style="background-color: rgb(251, 207, 214); border: 1px solid rgb(219, 219, 219); width: 742px; padding: 8px;"><div><span style="font-size: 18px; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;;">global.R</span></div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;;">讀套件</span></div></td><td colspan="3" style="border: 1px solid rgb(204, 204, 204); width: 612px; padding: 8px;"><div><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;;">library(shiny), </span><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;;">library(DiagrammeR), library(readr), library(dplyr), library(plyr), library(magrittr), </span><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;;">library(tidyr), </span><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;;">library(purrr), </span><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;;">library(ggplot2), </span><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;;">library(stringr), </span><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;;">library(reticulate), </span><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;;">library(data.tree), </span><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;;">library(treemap), </span><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;;">library(tibble), </span><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;;">library(jsonlite)</span></div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;;">讀程式碼</span></div></td><td colspan="3" style="border: 1px solid rgb(204, 204, 204); width: 612px; padding: 8px;"><div>source</div><ul><li><div>數值資料以slider形式並用ggplot2畫圖</div></li><li><div>整理為分類樹的資料表格</div></li><li><div>利用python整理表格資料</div></li><li><div>畫分類樹的圖</div></li></ul></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>讀資料</div></td><td colspan="3" style="border: 1px solid rgb(204, 204, 204); width: 612px; padding: 8px;"><div>Genus to functions</div><ul><li><div>jsonlite::fromJSON 讀入整理好的JSON檔<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">(data)</span></div></li><li><div>所有菌名寫成一個list <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">(names)</span></div></li></ul><div>Functions to Genus</div><ul><li><div>分成：[以下] 的資料類別 <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">(data)</span></div></li><div>
<span style="list-style: none;"><ul><li><div>radio_radio (雙層radio、branched) &lt;- JSON</div></li><li><div>radio (branched) &lt;- JSON</div></li><li><div>select (branched) &lt;- JSON</div></li><li><div>slider &lt;-  ggplot2</div></li></ul></span>
</div><li><div>建立所有特性名字的list <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">(names)</span></div></li><li><div>建立對應的資料類別，以便後續儀表板上的分類功能設定 <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">(type)</span></div></li></ul><div>Species data for Tree</div><ul><li><div>讀進BG's manual Table3的資料</div></li><li><div>去除NA、文字值、更正菌種名稱 <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">(data)</span></div></li><li><div>建立菌種名字list <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">(names)</span></div></li></ul></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>去除雜項</div></td><td colspan="3" style="border: 1px solid rgb(204, 204, 204); width: 612px; padding: 8px;"><div>rm (list = “...”)</div></td></tr><tr><td colspan="2" style="background-color: rgb(255, 230, 151); border: 1px solid rgb(219, 219, 219); width: 368px; padding: 8px;"><div><span style="font-size: 18px; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;;">ui.R</span></div></td><td colspan="2" style="background-color: rgb(205, 238, 240); border: 1px solid rgb(219, 219, 219); width: 374px; padding: 8px;"><div><span style="font-size: 18px; color: rgb(0, 0, 0); font-family: &quot;Helvetica Neue&quot;;">server.R</span></div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>總頁面</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 238px; padding: 8px;"><div>FluidPage(...)</div></td><td rowspan="2" style="height: 56px; border: 1px solid rgb(204, 204, 204); width: 128px; padding: 8px;"><div>總函數</div><div><br/></div></td><td rowspan="2" style="height: 56px; border: 1px solid rgb(204, 204, 204); width: 246px; padding: 8px;"><div>function(input, output, session){…}</div><div><br/></div></td></tr><tr><td style="border: 1px solid rgb(204, 204, 204); width: 130px; padding: 8px;"><div>設定分頁</div></td><td style="border: 1px solid rgb(204, 204, 204); width: 238px; padding: 8px;"><div>navbarPage( title = “…”, </div><div>    tabPanel(…),</div><div>    tabPanel(…) )</div></td></tr><tr><td colspan="2" style="background-color: rgb(254, 222, 193); border: 1px solid rgb(203, 178, 154); width: 368px; padding: 8px;"><div>第一頁：Genus to Functions</div></td><td colspan="2" style="background-color: rgb(254, 222, 193); border: 1px solid rgb(203, 178, 154); width: 374px; padding: 8px;"><div>Genus to functions</div></td></tr><tr><td colspan="4" style="background-color: rgb(254, 222, 193); border: 1px solid rgb(203, 178, 154); width: 742px; padding: 8px;"><div>左側搜尋菌名，右側顯示結果（一個頁面是個別表格、一個頁面是合併表格）</div></td></tr><tr><td colspan="2" style="border: 1px solid rgb(219, 219, 219); width: 368px; padding: 8px;"><div>排版：</div><ul><li><div>先分成左右兩塊（左小右大）</div></li><div>
<span style="list-style: none;"><ul><li><div>SidebarLayout(</div><div>    sidebarPanel(…),</div><div>    mainPanel(…) )</div></li></ul></span>
</div><li><div>在右邊主要區塊中，放入兩個小頁面</div></li><div>
<span style="list-style: none;"><ul><li><div>tabsetPanel(</div><div>    tabPanel(…),</div><div>    tabPanel(…) )</div></li></ul></span>
</div></ul></td><td colspan="2" style="border: 1px solid rgb(219, 219, 219); width: 374px; padding: 8px;"><ul><li><div>設計按鈕，按了，所選取的菌屬資料輸進server</div></li></ul><div>Individual Table</div><ul><li><div>建立一個函數，可以一次抓一個菌屬的所有資料，形成一個表格</div></li><li><div>利用 lapply 來 同時抓多隻菌屬的資料</div></li></ul><div>Merge Table</div><ul><li><div>利用所抓進來的菌屬資料，進行資料合併 (genus_tidy_data)</div></li></ul></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 130px; padding: 8px;"><div>選取欄</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 238px; padding: 8px;"><div>selectInput(‘ID’, ’…’, …)</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 128px; padding: 8px;"><div>選取欄</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 246px; padding: 8px;"><div>input$ID</div></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 130px; padding: 8px;"><div>按鈕</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 238px; padding: 8px;"><div>actionButton(‘ID’, ‘…’, …)</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 128px; padding: 8px;"><div>按鈕</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 246px; padding: 8px;"><div>input$ID</div></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 130px; padding: 8px;"><div>多表格顯示</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 238px; padding: 8px;"><div>uiOutput(‘ID’)</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 128px; padding: 8px;"><div>多表格顯示</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 246px; padding: 8px;"><div>output$ID &lt;- renderUI({...})</div></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 130px; padding: 8px;"><div>單一可搜尋表格顯示</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 238px; padding: 8px;"><div>dataTableOutput(‘ID’)</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 128px; padding: 8px;"><div>單一可搜尋表格顯示</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 246px; padding: 8px;"><div>output$ID &lt;- renderDataTable(…)</div></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 130px; padding: 8px;"><div>在Shiny中HTML 語法</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 238px; padding: 8px;"><div>第一級標題：tags$h1(‘...’)</div><div>第二級標題：tags$h2(‘...’)</div><div>新段落：tags$p(‘...’)</div><div>分隔線：tags$hr()</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 128px; padding: 8px;"><div>搜尋功能機制設定</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 246px; padding: 8px;"><div>eventReactive(…, {…})</div></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 130px; padding: 8px;"><div><br/></div></td><td style="border: 1px solid rgb(219, 219, 219); width: 238px; padding: 8px;"><div><br/></div></td><td style="border: 1px solid rgb(219, 219, 219); width: 128px; padding: 8px;"><div>隨資料改變而變動</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 246px; padding: 8px;"><div>observeEvent(…, {…})</div></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 130px; padding: 8px;"><div><br/></div></td><td style="border: 1px solid rgb(219, 219, 219); width: 238px; padding: 8px;"><div><br/></div></td><td style="border: 1px solid rgb(219, 219, 219); width: 128px; padding: 8px;"><div>檢驗有資料才做下去的流程控管</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 246px; padding: 8px;"><div>req(…)</div></td></tr><tr><td colspan="2" style="background-color: rgb(254, 222, 193); border: 1px solid rgb(203, 178, 154); width: 368px; padding: 8px;"><div>第二頁：Functions to Genus</div></td><td colspan="2" style="background-color: rgb(254, 222, 193); border: 1px solid rgb(203, 178, 154); width: 374px; padding: 8px;"><div>Functions to genus</div></td></tr><tr><td colspan="4" style="background-color: rgb(254, 222, 193); border: 1px solid rgb(203, 178, 154); width: 742px; padding: 8px;"><div>左側說明欄位，右側顯示結果</div></td></tr><tr><td colspan="2" style="border: 1px solid rgb(219, 219, 219); width: 368px; padding: 8px;"><div>選取一個功能/特徵後，跳出其他可選擇的UI</div><ul><li><div>select</div></li><li><div>radio button</div></li><div>
<span style="list-style: none;"><ul><li><div>double radio button <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">(radio_radio)</span></div></li></ul></span>
</div><li><div>slider <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">(plot)</span></div></li></ul></td><td colspan="2" style="border: 1px solid rgb(219, 219, 219); width: 374px; padding: 8px;"><ul><li><div>選擇一個功能/特徵後，先判定是哪一種類型的子輸入型態，在server這裡去設定好</div></li><li><div>設定一個function去按照不同的UI型態去抓取Functions的資料</div></li><li><div>建立畫圖函數 <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">(plot_func)</span> <span style="color: rgb(0, 145, 147);">ggplot2</span></div></li></ul></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 130px; padding: 8px;"><div>選擇欄</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 238px; padding: 8px;"><div>selectizeInput(‘ID', ‘…’, …)</div><div><span style="font-size: 14px;">註：options = list( MaxItems = 限制選取數量, placeholder = ‘欄位背景顯示字')</span></div></td><td style="border: 1px solid rgb(219, 219, 219); width: 128px; padding: 8px;"><div>選擇欄</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 246px; padding: 8px;"><div>input$ID</div></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 130px; padding: 8px;"><div>跳出的其他UI</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 238px; padding: 8px;"><div>uiOutput(‘ID’, ‘…’, …)</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 128px; padding: 8px;"><div>UI設置</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 246px; padding: 8px;"><div>output$ID &lt;- renderUI({…})</div><ul><li><div>radioButtons(‘…’, …)</div></li><li><div>sliderInput(‘…’, …)</div></li><li><div>selectInput(‘…’, …)</div></li></ul><div>註： 不可在renderUI設兩層的radioButtons，需要另外設一個renderUI，並透過if-else來做流程控制</div></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 130px; padding: 8px;"><div>文字輸出</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 238px; padding: 8px;"><div>verbatimText(‘ID’)</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 128px; padding: 8px;"><div>輸出文字</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 246px; padding: 8px;"><div>output$ID &lt;-</div><div>    renderPrint({…})</div></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 130px; padding: 8px;"><div>圖形輸出</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 238px; padding: 8px;"><div>plotOutput(‘ID’, ...)</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 128px; padding: 8px;"><div>輸出圖形</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 246px; padding: 8px;"><div>output$ID &lt;-</div><div>    renderPlot({…})</div></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 130px; padding: 8px;"><div>HTML 檔讀取，補充說明文字</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 238px; padding: 8px;"><div>includeHTML(“…”)</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 128px; padding: 8px;"><div>如果不要讓lapply回傳list但是要他做重複的事情</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 246px; padding: 8px;"><div>invisible(lapply(…, {…})</div></td></tr><tr><td colspan="2" style="background-color: rgb(254, 222, 193); border: 1px solid rgb(203, 178, 154); width: 368px; padding: 8px;"><div>第三頁：菌種鑑定程序圖</div></td><td colspan="2" style="background-color: rgb(254, 222, 193); border: 1px solid rgb(203, 178, 154); width: 374px; padding: 8px;"><div>菌種鑑定程序圖</div></td></tr><tr><td colspan="2" style="border: 1px solid rgb(219, 219, 219); width: 368px; padding: 8px;"><ul><li><div>左側建立搜尋欄位，右側顯示結果</div></li><li><div>右側第一分頁：菌種鑑定程序圖</div></li><li><div>右側第二分頁：合併表格、可下載連結</div></li></ul><div><span style="font-size: 14px;">註：只利用BG’s manual table3 的資料，</span><span style="background-color: rgb(255, 250, 165);font-size: 14px;-evernote-highlight:true;">期待後續能整合所有的species資料</span></div></td><td colspan="2" style="border: 1px solid rgb(219, 219, 219); width: 374px; padding: 8px;"><ul><li><div>整理原本的資料，去除註解</div></li><li><div>依選取的菌種建立表格，並利用此表格做鑑定程序圖</div></li><li><div>去除相同值、NA值、文字值</div></li><li><div>依層數決定要用哪一個函數畫圖</div></li></ul></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 130px; padding: 8px;"><div>選取欄</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 238px; padding: 8px;"><div>selectizeInput(‘ID’, …)</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 128px; padding: 8px;"><div>選取輸入</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 246px; padding: 8px;"><div>input$ID</div></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 130px; padding: 8px;"><div>搜尋按鈕</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 238px; padding: 8px;"><div>actionButton(‘ID’, ‘...')</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 128px; padding: 8px;"><div>利用observeEvent 去控制做資料輸入</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 246px; padding: 8px;"><div>observeEvent( input$ID, {..})</div></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 130px; padding: 8px;"><div>跳出之選先後分離順序</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 238px; padding: 8px;"><div>uiOutput(‘ID’)</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 128px; padding: 8px;"><div>選取順序</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 246px; padding: 8px;"><div>output$ID &lt;- renderUI({…})</div></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 130px; padding: 8px;"><div>補充文字</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 238px; padding: 8px;"><div>verbatimTextOutput(‘ID')</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 128px; padding: 8px;"><div>補充文字</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 246px; padding: 8px;"><div>output$ID &lt;-</div><div>    renderPrint({…})</div></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 130px; padding: 8px;"><div>鑑定樹輸出</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 238px; padding: 8px;"><div>grVizOutput(‘ID’)</div><div>註：鑑定樹</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 128px; padding: 8px;"><div>鑑定樹</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 246px; padding: 8px;"><div>grViz(DiagrammeR::generate_dot(ToDiagrammeRGraph(...)))</div></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 130px; padding: 8px;"><div>下載連結</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 238px; padding: 8px;"><div>downloadlink(‘ID’, ‘…')</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 128px; padding: 8px;"><div>設定下載內容</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 246px; padding: 8px;"><div>downloadHandler(</div><div>    filename = '…',</div><div>    content = function(…){…})</div></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 130px; padding: 8px;"><div>表格輸出</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 238px; padding: 8px;"><div>dataTableOutput(‘ID’)</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 128px; padding: 8px;"><div>表格</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 246px; padding: 8px;"><div>output$ID &lt;- </div><div>    renderDataTable({…})</div></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 130px; padding: 8px;"><div><br/></div></td><td style="border: 1px solid rgb(219, 219, 219); width: 238px; padding: 8px;"><div><br/></div></td><td style="border: 1px solid rgb(219, 219, 219); width: 128px; padding: 8px;"><div>建立空變數在shiny中</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 246px; padding: 8px;"><div>reactiveValues()</div></td></tr><tr><td style="border: 1px solid rgb(219, 219, 219); width: 130px; padding: 8px;"><div><br/></div></td><td style="border: 1px solid rgb(219, 219, 219); width: 238px; padding: 8px;"><div><br/></div></td><td style="border: 1px solid rgb(219, 219, 219); width: 128px; padding: 8px;"><div>在shiny中，某些資料會隨著輸入的資料改變</div></td><td style="border: 1px solid rgb(219, 219, 219); width: 246px; padding: 8px;"><div>reactive({…})</div></td></tr></tbody></table><div>註：部分類似的程式碼，不再重複做筆記；部分重複程式碼，為凸顯某類別下的功能而重複做筆記</div></div></div><div><br/></div></body></html>
